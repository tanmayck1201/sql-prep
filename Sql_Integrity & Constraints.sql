/*Integrity Constraints*/
USE MYDB;

-- NOT NULL
CREATE TABLE TUTEE
(SNO INT(3) NOT NULL, 
SNAME VARCHAR(10), 
MARKS INT(3));

INSERT INTO TUTEE VALUES(101, 'RAKESH', 75); -- CORRECT
INSERT INTO TUTEE VALUES(NULL, 'RAKESH', 75); -- ERROR

describe TUTEE;
SELECT * FROM TUTEE;

DROP TABLE TUTEE;


-- UNIQUE
-- COLUMN LEVEL SPECIFY
CREATE TABLE TUTEE
(SNO INT(3) UNIQUE, 
SNAME VARCHAR(10), 
MARKS INT(3));

-- TABLE LEVEL SPECIFY
CREATE TABLE TUTEE
(SNO INT(3), 
SNAME VARCHAR(10), 
MARKS INT(3),
UNIQUE(SNO, SNAME));

INSERT INTO TUTEE VALUES(101, 'RAKESH', 75); 
INSERT INTO TUTEE VALUES(101, 'RAKESHI', 70); 
INSERT INTO TUTEE VALUES(102, 'RAKESH', 80); 
INSERT INTO TUTEE VALUES(101, 'RAKESH', 80); 


-- PRIMARY KEY
-- COLUMN LEVEL SPECIFY
CREATE TABLE TUTEE1
(SNO INT(3) PRIMARY KEY, 
SNAME VARCHAR(10), 
MARKS INT(3));

INSERT INTO TUTEE1 VALUES (101, 'KANHA', 100); -- RIGHT
INSERT INTO TUTEE1 VALUES (101, 'GOVIND', 80); -- INVALID
INSERT INTO TUTEE1 VALUES (NULL, 'GOVIND', 80); -- INVALID

DROP TABLE TUTEE1;

SELECT * FROM TUTEE1;

-- TABLE LEVEL SPECIFY (COMPOSITE KEY)
CREATE TABLE TUTEE1
(SNO INT(3), 
SNAME VARCHAR(10), 
MARKS INT(3),
PRIMARY KEY(SNO, SNAME));

INSERT INTO TUTEE1 VALUES (101, 'KANHA', 100); -- RIGHT
INSERT INTO TUTEE1 VALUES (102, 'GOPAL', 99); -- RIGHT
INSERT INTO TUTEE1 VALUES (101, 'GOVIND', 80); -- RIGHT
INSERT INTO TUTEE1 VALUES (102, 'GOPAL', 80); -- INVALID
INSERT INTO TUTEE1 VALUES (NULL, 'GOVIND', 80); -- INVALID


-- FOREIGN KEY 
-- PARENT TABLE
CREATE TABLE SCHOOL
(SNO INT(3),
SNAME VARCHAR(15),
MARKS INT(3),
PRIMARY KEY(SNO)
);

INSERT INTO SCHOOL VALUES(101,'ARJUN',90);
INSERT INTO SCHOOL VALUES(102,'MADHAV',95);
INSERT INTO SCHOOL VALUES(103,'KUNTI',100);
INSERT INTO SCHOOL VALUES(104,'KUNTI',100);

SELECT * FROM SCHOOL;

-- CHILD TABLE
CREATE TABLE LIBRARY
(SNO INT(3),
FOREIGN KEY (SNO) REFERENCES SCHOOL(SNO),
BOOK_NAME VARCHAR(10)
);

INSERT INTO LIBRARY VALUES(101,'PANDAV');
INSERT INTO LIBRARY VALUES(102,'GEETA');
INSERT INTO LIBRARY VALUES(103,'BHAKT');
INSERT INTO LIBRARY VALUES(104,'BHAKTI'); -- INVALID

SELECT * FROM LIBRARY;

-- RI8 SEQUENCE FOR DELETION MANUALLY!
DELETE FROM LIBRARY WHERE SNO=101;
DELETE FROM SCHOOL WHERE SNO=101;

DROP TABLE LIBRARY;

-- TO DELETE USING DELETE CASCADE
-- CHILD TABLE
CREATE TABLE LIBRARY
(SNO INT(3),
FOREIGN KEY (SNO) REFERENCES SCHOOL(SNO) ON DELETE CASCADE,
BOOK_NAME VARCHAR(10)
);

-- WILL AUTOMATICALLY DELETE CORRESPONDING LIBRARY ROW(S).
DELETE FROM SCHOOL WHERE SNO=101;

SELECT * FROM LIBRARY;
SELECT * FROM SCHOOL;


-- CHECK CONSTRAINT
CREATE TABLE MONEY
(SNO INT (5),
SNAME VARCHAR(15),
MONEY INT(5) CHECK(MONEY BETWEEN 500 AND 1000));

SELECT * FROM MONEY;

INSERT INTO MONEY VALUES(101, 'TANMAY', 750); -- VALID
INSERT INTO MONEY VALUES(102, 'KANHUA', 1250); -- INVALID


-- DEFAULT CONSTRAINT
CREATE TABLE ORDERS
(ID INT(5),
ORDERNUMBER INT(5),
ORDERDATE DATETIME DEFAULT NOW()
);

SELECT NOW();
SELECT * FROM ORDERS;

INSERT INTO ORDERS VALUES (101, 12345, '2022-01-05 15:42:25');

INSERT INTO ORDERS(ID, ORDERNUMBER) VALUES (102, 56879);


/*AUTO-INCREMENT*/
CREATE TABLE AUTO
(SNO INT(5) PRIMARY KEY AUTO_INCREMENT,
SNAME VARCHAR(15),
MARKS INT(5)
);

-- STATIC AUTO-INCREMENT
ALTER TABLE AUTO AUTO_INCREMENT = 100;

INSERT INTO AUTO(SNAME, MARKS) VALUES('X',60);
INSERT INTO AUTO(SNAME, MARKS) VALUES('Y',70);
INSERT INTO AUTO(SNAME, MARKS) VALUES('Z',80);

DELETE FROM AUTO WHERE SNO=100;

SELECT * FROM AUTO;

/*LIMIT*/
USE HR;
SELECT * FROM EMPLOYEES LIMIT 10;
SELECT * FROM EMPLOYEES LIMIT 2,10;


